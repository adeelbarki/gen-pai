<div class="w-[95%] h-[93vh] mx-auto bg-gray-100 mt-2 shadow-2xl rounded-2xl flex flex-col">
  
  <!-- Header -->
  <div class="h-[8vh] bg-white flex flex-col w-full justify-center px-4">
    <div class="flex justify-between items-center w-full">
      <h1 class="text-2xl font-bold ml-4">Gen AI Physician</h1>
      <button (click)="signOut()">Sign Out</button>
    </div>
  
    <!-- Navigation Menu -->
    <div class="flex-grow flex mt-1 justify-center">
      <div class="w-[99%] h-[4vh] bg-gray-100 flex items-center">
        <button *ngFor="let tab of tabs"
          (click)="setActiveTab(tab.name)"
          [ngClass]="{'bg-blue-500 text-white': activeTab === tab.name, 'bg-gray-100 hover:bg-blue-400 hover:text-white': activeTab !== tab.name}"
          class="text-sm font-semibold px-4 py-1 ml-6 rounded-md transition">
          {{ tab.label }}
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->

  <div class="flex w-full h-[calc(100%-8vh-4vh)] p-10 gap-4 flex-1">
    <ng-container *ngIf="activeTab === 'Dashboard'">
      <!-- Left Card -->
      <div class="w-1/4 h-full flex flex-col">
        <div class="w-full h-full flex">
          <app-chat-sidebar class="w-full h-full"></app-chat-sidebar>
        </div>
      </div>
      <!-- Middle Card -->
      <div class="w-2/4 h-full flex flex-col">
        <div class="w-full h-full flex">
          <app-chat-window class="w-full h-full"></app-chat-window>
        </div>
      </div>

      <!-- Right Card -->
      <div class="w-1/4 h-full flex flex-col">
        <div class="w-full h-full flex">
          <app-medical-timeline class="w-full h-full"></app-medical-timeline>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="activeTab === 'Studies'">
      <div class="w-full h-full flex gap-4">
    
        <!-- Left Column: Study List -->
        <div class="w-1/6 bg-white rounded-lg shadow p-4 overflow-auto">
          <div *ngFor="let modality of studies | keyvalue">
            <div class="cursor-pointer font-semibold text-lg text-blue-600 hover:underline"
                (click)="toggleExpand(modality.key)">
              {{ modality.key }}
            </div>
            <ul *ngIf="expanded === modality.key" class="ml-4 mt-2 space-y-1">
              <li *ngFor="let image of modality.value"
                  class="text-blue-500 cursor-pointer hover:underline"
                  (click)="selectImage(image)">
                {{ image }}
              </li>
            </ul>
          </div>
        </div>

        <!-- Right Column: Image Preview -->
        <div class="w-5/6 bg-white rounded-lg shadow flex items-center justify-center">
          
       <app-study-image-viewer [imageName]="selectedImage"></app-study-image-viewer>
   
        <div *ngIf="!selectedImage" class="text-gray-500 italic">
            Select an image to view
          </div>
        </div>
      </div>
    </ng-container>
  </div>
    
</div>